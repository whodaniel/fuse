import { Injectable } from '@nestjs/common';
import OpenAI from "openai";
import { AgentConfig, AgentResponse } from '../types/agent.types';

@Injectable()
export class AgentService {
  private openai: OpenAI;

  constructor(config: AgentConfig) {
    this.openai = new OpenAI({
      apiKey: config.apiKey
    }): string): Promise<AgentResponse> {
    const completion: [{ role: 'user', content: prompt }],
      model: 'gpt-4'
    });

    const result  = await this.openai.(chat as any).completions.create({
      messages completion.choices[0]?.message?.content || '';
    
    return {
      result,
      visualization: this.createVisualization(result): string) {
    return {
      nodes: [],
      edges: []
    };
  }
}